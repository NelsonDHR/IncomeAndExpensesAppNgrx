"use strict";(self.webpackChunkincome_and_expenses=self.webpackChunkincome_and_expenses||[]).push([[916],{2916:(R,f,i)=>{i.r(f),i.d(f,{IncomeExpensesModule:()=>X});var p=i(9808),l=i(4232),a=i(2382),e=i(5e3);let Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,l.Bz]]}),n})();var b=i(483),x=i(9300),d=i(4612),c=i(5620),y=(i(5525),i(4004)),_=i(6185),v=i(9366);let h=(()=>{class n{constructor(t,s){this.firestore=t,this.authService=s}createIncomeExpense(t){return this.firestore.doc(`${this.authService.user.uid}/income-expenses`).collection("items").add(Object.assign({},t))}initIncomeExpensesListener(t){return this.firestore.collection(`${t}/income-expenses/items`).snapshotChanges().pipe((0,y.U)(s=>s.map(r=>Object.assign({uid:r.payload.doc.id},r.payload.doc.data()))))}deleteIncomeExpense(t){return this.firestore.doc(`${this.authService.user.uid}/income-expenses/items/${t}`).delete()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(_.ST),e.LFG(v.e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T=(()=>{class n{constructor(t){this.store=t}ngOnInit(){this.userSubscription=this.store.select("user").subscribe(({user:t})=>{this.userName=t.name})}ngOnDestroy(){this.userSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-navbar"]],decls:15,vars:1,consts:[[1,"navbar","default-layout","col-sm-12","col-12","p-0","fixed-top","d-flex","flex-row"],[1,"text-center","navbar-brand-wrapper","d-flex","align-items-top","justify-content-center"],[1,"navbar-brand","brand-logo"],["src","assets/images/logo.svg","alt","logo"],[1,"navbar-brand","brand-logo-mini"],["src","assets/images/logo-mini.svg","alt","logo"],[1,"navbar-menu-wrapper","d-flex","align-items-center"],[1,"navbar-nav","navbar-nav-right"],[1,"nav-item","d-none","d-sm-inline-block"],["id","UserDropdown","href","#","data-toggle","dropdown","aria-expanded","false",1,"nav-link"],[1,"profile-text"],["src","assets/images/faces/face1.jpg","alt","Profile image",1,"img-xs","rounded-circle"],["type","button","data-toggle","offcanvas",1,"navbar-toggler","navbar-toggler-right","d-sm-none","align-self-center"],[1,"icon-menu"]],template:function(t,s){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"a",4),e._UZ(5,"img",5),e.qZA()(),e.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9)(10,"span",10),e._uU(11),e.qZA(),e._UZ(12,"img",11),e.qZA()()(),e.TgZ(13,"button",12),e._UZ(14,"span",13),e.qZA()()()),2&t&&(e.xp6(11),e.hij("Hello, ",s.userName," !"))},styles:[""]}),n})();var U=i(5226),u=i.n(U);let A=(()=>{class n{constructor(t,s,r){this.auth=t,this.router=s,this.store=r,this.userName=""}ngOnInit(){this.userSubscription=this.store.select("user").subscribe(({user:t})=>{this.userName=t.name})}logOut(){u().fire({title:"Logging out",didOpen:()=>{u().showLoading()}}),setTimeout(()=>{u().close()},1e3),this.auth.logOut().then(()=>this.router.navigate(["/login"]))}ngOnDestroy(){this.userSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.e),e.Y36(l.F0),e.Y36(c.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sidebar"]],decls:32,vars:1,consts:[[1,"sidebar","sidebar-offcanvas"],[1,"nav"],[1,"nav-item","nav-profile"],[1,"nav-link"],[1,"user-wrapper"],[1,"profile-image"],["src","assets/images/faces/face1.jpg","alt","profile image"],[1,"text-wrapper"],[1,"profile-name"],[1,"designation","text-muted"],[1,"nav-item"],["routerLink","",1,"nav-link"],[1,"menu-icon","fa","fa-tachometer-alt"],[1,"menu-title"],["routerLink","/income-expenses",1,"nav-link"],[1,"menu-icon","fa","fa-clipboard-list"],["routerLink","/detail",1,"nav-link"],[1,"menu-icon","fa","fa-table"],[1,"nav-link","cursor",3,"click"],[1,"menu-icon","fa","fa-sign-out-alt"]],template:function(t,s){1&t&&(e.TgZ(0,"nav",0)(1,"ul",1)(2,"li",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"p",8),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._UZ(11,"small",9),e.qZA()()()()(),e.TgZ(12,"li",10)(13,"a",11),e._UZ(14,"i",12),e.TgZ(15,"span",13),e._uU(16,"Dashboard"),e.qZA()()(),e.TgZ(17,"li",10)(18,"a",14),e._UZ(19,"i",15),e.TgZ(20,"span",13),e._uU(21,"Income and Expenses"),e.qZA()()(),e.TgZ(22,"li",10)(23,"a",16),e._UZ(24,"i",17),e.TgZ(25,"span",13),e._uU(26,"Detail"),e.qZA()()(),e.TgZ(27,"li",10)(28,"a",18),e.NdJ("click",function(){return s.logOut()}),e._UZ(29,"i",19),e.TgZ(30,"span",13),e._uU(31,"Logout"),e.qZA()()()()()),2&t&&(e.xp6(9),e.Oqu(s.userName))},directives:[l.yS],styles:[""]}),n})(),I=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-footer"]],decls:10,vars:0,consts:[[1,"footer"],[1,"container-fluid","clearfix"],[1,"text-muted","d-block","text-center","text-sm-left","d-sm-inline-block"],["href","http://fernando-herrera.com","target","_blank"],[1,"float-none","float-sm-right","d-block","mt-1","mt-sm-0","text-center"],[1,"fa","fa-heart","text-danger"]],template:function(t,s){1&t&&(e.TgZ(0,"footer",0)(1,"div",1)(2,"span",2),e._uU(3,"Derechos reservados \xa9 20XX "),e.TgZ(4,"a",3),e._uU(5,"Fernando Herrera"),e.qZA(),e._uU(6,"."),e.qZA(),e.TgZ(7,"span",4),e._uU(8,"Creado a mano con "),e._UZ(9,"i",5),e.qZA()()())},styles:[""]}),n})(),E=(()=>{class n{constructor(t,s){this.store=t,this.incomeExpenseService=s}ngOnInit(){this.userSubscription=this.store.select("user").pipe((0,x.h)(t=>null!==t.user)).subscribe(({user:t})=>{this.incomeExpenseSubs=this.incomeExpenseService.initIncomeExpensesListener(t.uid).subscribe(s=>{console.log(s),this.store.dispatch(d.U({items:s}))})})}ngOnDestroy(){var t,s;null===(t=this.userSubscription)||void 0===t||t.unsubscribe(),null===(s=this.incomeExpenseSubs)||void 0===s||s.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.yh),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-dashboard"]],decls:7,vars:0,consts:[[1,"page-body-wrapper"],[1,"main-panel"],[1,"content-wrapper"]],template:function(t,s){1&t&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0),e._UZ(2,"app-sidebar"),e.TgZ(3,"div",1)(4,"div",2),e._UZ(5,"router-outlet"),e.qZA(),e._UZ(6,"app-footer"),e.qZA()())},directives:[T,A,l.lC,I],styles:[""]}),n})(),C=(()=>{class n{transform(t){return t.sort((s,r)=>"income"===s.type?-1:1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"orderIncome",type:n,pure:!0}),n})();function S(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"button",7),e.NdJ("click",function(){const m=e.CHM(t).$implicit;return e.oxw().delete(null==m?null:m.uid)}),e._UZ(10,"i",8),e._uU(11," Delete "),e.qZA()()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(e.lcZ(5,7,t.amount)),e.xp6(2),e.ekj("text-success","income"===t.type)("text-danger","expense"===t.type),e.xp6(1),e.hij(" ",t.type,"")}}let q=(()=>{class n{constructor(t,s){this.store=t,this.incomeExpenseService=s,this.incomeExpense=[]}ngOnInit(){this.IncomeExpenseSubscription=this.store.select("incomeExpense").subscribe(({items:t})=>{this.incomeExpense=Object.values(t),console.log(this.incomeExpense)})}ngOnDestroy(){this.IncomeExpenseSubscription.unsubscribe()}delete(t){console.log(t),this.incomeExpenseService.deleteIncomeExpense(t).then(()=>u().fire("Deleted","Item Deleted","success")).catch(s=>u().fire("Error",s,"error"))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.yh),e.Y36(h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-detail"]],decls:19,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"table"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Details income and expenses"),e.qZA(),e.TgZ(6,"table",5)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"Description"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Ammount"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Type"),e.qZA(),e._UZ(15,"th"),e.qZA()(),e.TgZ(16,"tbody"),e.YNc(17,S,12,9,"tr",6),e.ALo(18,"orderIncome"),e.qZA()()()()()()),2&t&&(e.xp6(17),e.Q6J("ngForOf",e.lcZ(18,1,s.incomeExpense)))},directives:[p.sg],pipes:[C,p.H9],styles:[""]}),n})();class O{constructor(o,t,s){this.description=o,this.amount=t,this.type=s}}var g=i(5299);function D(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().type="expense"}),e._uU(1,"Income"),e.qZA()}}function F(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().type="income"}),e._uU(1,"Expense"),e.qZA()}}function k(n,o){1&n&&(e.TgZ(0,"button",16),e._UZ(1,"i",17),e._uU(2," Add "),e.qZA()),2&n&&e.Q6J("disabled",!0)}function j(n,o){if(1&n&&(e.TgZ(0,"button",16),e._UZ(1,"i",18),e._uU(2," Add "),e.qZA()),2&n){const t=e.oxw();e.Q6J("disabled",t.incomeForm.invalid)}}let w=(()=>{class n{constructor(t,s,r){this.fb=t,this.incomeExpenseService=s,this.store=r,this.type="income",this.loading=!1}ngOnInit(){this.loadingSubscription=this.store.select("ui").subscribe(t=>this.loading=t.isLoading),this.incomeForm=this.fb.group({description:["",a.kI.required],amount:["",a.kI.required]})}ngOnDestroy(){this.loadingSubscription.unsubscribe()}save(){if(this.incomeForm.invalid)return;this.store.dispatch(g.h());const{description:t,amount:s}=this.incomeForm.value,r=new O(t,s,this.type);this.incomeExpenseService.createIncomeExpense(r).then(()=>{u().fire(`${this.type} created `,t,"success"),this.store.dispatch(g.V()),this.incomeForm.reset()}).catch(m=>{this.store.dispatch(g.V()),u().fire("Error",m.message,"error")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu),e.Y36(h),e.Y36(c.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-income-expenses"]],decls:30,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-description"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","placeholder","Description","name","description","formControlName","description",1,"form-control"],["type","number","placeholder","Amount","name","amount","formControlName","amount",1,"form-control"],["type","button","class","btn btn-primary btn-block",3,"click",4,"ngIf"],["type","button","class","btn btn-warning btn-block",3,"click",4,"ngIf"],["type","submit","class","btn btn-success mr-2",3,"disabled",4,"ngIf"],["type","reset",1,"btn","btn-light"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["type","button",1,"btn","btn-warning","btn-block",3,"click"],["type","submit",1,"btn","btn-success","mr-2",3,"disabled"],[1,"fa","fa-spin","fa-sync"],[1,"fa","fa-save"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Add Income / Expense"),e.qZA(),e.TgZ(6,"p",5),e._uU(7," Specify the amount and type "),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return s.save()}),e.TgZ(9,"div",7)(10,"label"),e._uU(11,"Description"),e.qZA(),e._UZ(12,"input",8),e.qZA(),e.TgZ(13,"div",7)(14,"label"),e._uU(15,"Amount"),e.qZA(),e._UZ(16,"input",9),e.TgZ(17,"p"),e._uU(18," Must be a positive amount "),e.qZA()(),e.TgZ(19,"div",7)(20,"label"),e._uU(21,"Type"),e.qZA(),e._UZ(22,"br"),e.YNc(23,D,2,0,"button",10),e.YNc(24,F,2,0,"button",11),e.qZA(),e._UZ(25,"hr"),e.YNc(26,k,3,1,"button",12),e.YNc(27,j,3,1,"button",12),e.TgZ(28,"button",13),e._uU(29,"Cancel"),e.qZA()()()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",s.incomeForm),e.xp6(15),e.Q6J("ngIf","income"===s.type),e.xp6(1),e.Q6J("ngIf","expense"===s.type),e.xp6(2),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",!s.loading))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.wV,p.O5],styles:[""]}),n})();function N(n,o){if(1&n&&(e.TgZ(0,"div",18)(1,"div",2)(2,"div",3)(3,"h1",19),e._uU(4,"Graphic"),e.qZA(),e.TgZ(5,"div")(6,"div")(7,"div",20),e._UZ(8,"canvas",21),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Q6J("data",t.doughnutChartData)("type",t.doughnutChartType)}}const J=[{path:"",component:E,children:[{path:"",component:(()=>{class n{constructor(t){this.store=t,this.incomes=0,this.expenses=0,this.totalIncomes=0,this.totalExpenses=0,this.doughnutChartLabels=["Incomes","Expenses"],this.doughnutChartData={labels:this.doughnutChartLabels,datasets:[{data:[this.totalIncomes,this.totalExpenses]}]},this.doughnutChartType="doughnut"}ngOnInit(){this.store.select("incomeExpense").subscribe(({items:t})=>this.generatestatistics(t))}generatestatistics(t){this.incomes=0,this.expenses=0,this.totalIncomes=0,this.totalExpenses=0;for(const s of Object.values(t))"income"===s.type?(this.totalIncomes+=s.amount,this.incomes++):(this.totalExpenses+=s.amount,this.expenses++),this.doughnutChartData.datasets=[{data:[this.totalIncomes,this.totalExpenses]}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-statistics"]],decls:48,vars:16,consts:[[1,"row"],[1,"col-6"],[1,"card","card-statistics"],[1,"card-body"],[1,"clearfix"],[1,"float-left"],[1,"fa","fa-money-bill-alt","text-success","icon-lg"],[1,"float-right"],[1,"mb-0","text-right"],[1,"fluid-container"],[1,"font-weight-medium","text-right","mb-0"],[1,"text-muted","mt-3","mb-0"],["aria-hidden","true",1,"mdi","mdi-alert-octagon","mr-1"],[1,"fa","fa-shipping-fast","text-danger","icon-lg"],[1,"row","m-5"],[1,"col-12"],[1,"fa","fa-building","text-info","icon-lg"],["class","col-12 p-5",4,"ngIf"],[1,"col-12","p-5"],[1,"card-title"],[2,"display","block"],["baseChart","",3,"data","type"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"i",6),e.qZA(),e.TgZ(7,"div",7)(8,"p",8),e._uU(9,"Ingresos"),e.qZA(),e.TgZ(10,"div",9)(11,"h3",10),e._uU(12),e.ALo(13,"currency"),e.qZA()()()(),e.TgZ(14,"p",11),e._UZ(15,"i",12),e._uU(16),e.qZA()()()(),e.TgZ(17,"div",1)(18,"div",2)(19,"div",3)(20,"div",4)(21,"div",5),e._UZ(22,"i",13),e.qZA(),e.TgZ(23,"div",7)(24,"p",8),e._uU(25,"Expenses"),e.qZA(),e.TgZ(26,"div",9)(27,"h3",10),e._uU(28),e.ALo(29,"currency"),e.qZA()()()(),e.TgZ(30,"p",11),e._UZ(31,"i",12),e._uU(32),e.qZA()()()()(),e.TgZ(33,"div",14)(34,"div",15)(35,"div",2)(36,"div",3)(37,"div",4)(38,"div",5),e._UZ(39,"i",16),e.qZA(),e.TgZ(40,"div",7)(41,"p",8),e._uU(42,"Difference"),e.qZA(),e.TgZ(43,"div",9)(44,"h3"),e._uU(45),e.ALo(46,"currency"),e.qZA()()()()()()(),e.YNc(47,N,9,2,"div",17),e.qZA()),2&t&&(e.xp6(12),e.Oqu(e.lcZ(13,10,s.totalIncomes)),e.xp6(4),e.hij(" ",s.incomes," items "),e.xp6(12),e.Oqu(e.lcZ(29,12,s.totalExpenses)),e.xp6(4),e.hij(" ",s.expenses," items "),e.xp6(12),e.ekj("text-success",s.totalIncomes-s.totalExpenses>0)("text-danger",s.totalIncomes-s.totalExpenses<0),e.xp6(1),e.hij(" ",e.lcZ(46,14,s.totalIncomes-s.totalExpenses)," "),e.xp6(2),e.Q6J("ngIf",s.incomes>0||s.expenses>0))},directives:[p.O5,b.jh],pipes:[p.H9],styles:[""]}),n})()},{path:"income-expenses",component:w},{path:"detail",component:q}]}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.Bz.forChild(J)],l.Bz]}),n})();const M=(0,c.Lq)({items:[]},(0,c.on)(d.U,(n,{items:o})=>Object.assign(Object.assign({},n),{items:Object.assign({},o)})),(0,c.on)(d.i,n=>Object.assign(Object.assign({},n),{items:[]})));function Q(n,o){return M(n,o)}let X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.ez,c.Aw.forFeature("incomeExpense",Q),l.Bz,a.UX,Z,b.vQ,Y]]}),n})()}}]);